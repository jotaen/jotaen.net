{{ define "title" }}{{ .Title }}{{ end }}

{{ define "head"}}
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@jot4en">
  <meta name="twitter:title" content="{{ .Title }}">
  <meta name="twitter:description" content="{{ .Params.Subtitle }}">
  <meta name="twitter:image" content="{{ .Site.BaseURL }}{{ .Params.Image }}">
{{ end }}

{{ define "main" }}
  <header class="siteimage" style="background-image:url({{ .Params.Image }})" alt="{{ .Title }}">
    {{ if .Params.Image_info }}
      <div class="siteimage-info">
        &#8505;
        <p>{{ .Params.Image_info }}</p>
      </div>
    {{ end }}
  </header>

  <article class="post">
    {{ .Content }}

    <script>
      (function createSidebarGlossesFromFootnotes(document) {
        var footnoteContainer = document.getElementsByClassName("footnotes")[0];
        if (!footnoteContainer) return;
        Array.from(footnoteContainer.getElementsByTagName("li"))
          .forEach(function(footnote, i) {
            var sidenote = document.createElement("div");
            sidenote.classList.add("post-gloss__in-sidebar");
            sidenote.innerHTML = footnote.innerHTML;
            sidenote.removeChild(sidenote.lastElementChild); // remove "return" link

            var ref = document.getElementById("fnref:" + (i + 1));
            ref.parentElement.insertBefore(sidenote, ref);
          });
      }(document));
    </script>
  </article>
{{ end }}
