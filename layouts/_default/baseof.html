<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Jan Heuermann">
    <meta name="google-site-verification" content="yhf1DPiu9P7NoA1YbdXwzzLXG2Oe8a6cY1wGWnLBSkE">

    <title>{{ block "title" . }}{{ end }} โข jotaen.net</title>

    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="stylesheet" href="https://use.typekit.net/yqg5mad.css">
    <link rel="stylesheet" href="/style.css?{{ now.Unix }}">
    
    <script defer="true" src="/highlight.js" onload="hljs.initHighlightingOnLoad()"></script>

    {{ block "head" . }}{{ end }}
  </head>
  <body>

    <header class="belt-dark belt-topfix belt-topfix-thickness">
      <div class="header">
        <a href="/">
          <svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg" class="header-logo">
            <circle cx="40" cy="20" r="10" fill="none" stroke="#ffffff" stroke-width="7" />
            <path d="M 30 70
                     V 50
                     a 10 10, 0, 0, 1, 20 0
                     V 60
                     " fill="none" stroke="#ffffff" stroke-width="7" />
            <g transform="translate(13.5 50) scale(1.075) translate(0 -5.3) rotate(45)">
              <rect x="0" y="0" width="7.5" height="7.5" fill="#ffffff" />
            </g>
          </svg>
          <span class="header-name">Jan Heuermann</span>
        </a>
        <span style="flex:content"><!--Spacer--></span>
        <a href="/archive">Blog</a>
        <a href="/about">About</a>
      </div>
    </header>
    <div class="belt-topfix-thickness"><!--Spacer--></div>

    {{ block "main" . }}{{ end }}

    <footer>
      <div class="belt-medium">{{ block "context-belt" . }}{{ end }}</div>

      <div class="belt-dark"><div class="footer-newsletter">
        <h3>Newsletter</h3>
        <p>Get notified via email when I publish a new blog post!</p>
        <p>
          <input type="email" value="" name="EMAIL" placeholder="Your email address">
          <input type="submit" value="Subscribe" name="subscribe">
        </p>
        <p class="footer-newsletter-disclaimer">No spam. 1-click-unsubscribe anytime.</p>
      </div></div>

      <div class="belt-light"><div class="footer-about">
        <div style="display: flex; flex-direction: row; align-items: center;">
          <img src="/portrait-jan.small.jpg" style="border-radius:50%">
          <span>
            Hey there!<br>
            My name is Jan. I live in Berlin and work as software developer.<br>
            Learn more <a href="/about" onClick="return false;">about me</a> or reach out via <a href="mailto: [CLICK TO REVEAL]" class="m41lm3" onClick="return false;">email</a>.
          </span>
        </div>
        <div class="footer-about-legal">
          <a class="a-reset" href="/impressum">Impressum & Privacy Policy</a>
        </div>
      </div></div>

    </footer>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-62283896-1', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');

      (function(intervalInSeconds, maxStrokes) {
        let i = 0;
        const heartbeater = setInterval(() => {
          i++;
          if (i >= maxStrokes) clearInterval(heartbeater);
          ga('send', {
            hitType: 'event',
            eventCategory: 'Heartbeat',
            eventAction: 'pulse',
            eventValue: 30
          });
        }, intervalInSeconds*1000);
      })(10, 120); // max runtime: 20 minutes (120 strokes รก 10 seconds)

      (function activateEmail() {
        const m41lm3 = "m41lm3";
        const links = document.getElementsByClassName(m41lm3);
        [].forEach.call(links, (link) => {
          const secret = getComputedStyle(link).getPropertyValue('--secret');
          link.onclick = (e) => {
            e.preventDefault();
            fetch("/" + m41lm3 + ".json")
            .then((res) => {
              if (res.ok) return res.json();
              else throw "FAILED";
            })
            .then((json) => {
              const txt = json.filter(j => j.key%secret===0).map(j => j.val).join("");
              const addr = txt.replace(/(\*)/, "@").replace(/(\:)/, ".");
              const target = "mailto:" + addr;
              window.location = target;
            });
          };
        });
      }());
    </script>

  </body>
</html>
